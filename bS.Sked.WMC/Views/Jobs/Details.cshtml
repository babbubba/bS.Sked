@model bS.Sked.WMC.ViewModel.JobDetailsViewModel

@{
    ViewBag.Title = "Job '" + Model.Name + "'";
}

<div class="job-details-container">
    <div class="row">
        <div class="col-md-12 job-details-buttons">
            @Html.ActionLink("Edit", "Edit", new { id = Model.Id }, new { @class = "btn btn-default pull-right" })
            @Html.ActionLink("Back to List", "Index", null, new { @class = "btn btn-default pull-right" })
        </div>
    </div>
    <div class="row">
        <div class="col-md-8 job-details-tasks-box">
            <div class="panel panel-default">
                <div class="panel-heading">
                    Tasks
                    <button id="btn-refresh-tasks" class="btn btn-xs pull-right glyphicon glyphicon-refresh"></button>
                </div>
                <div id="tasks-table" class="panel-body">
                    @{Html.RenderPartial("JobsTasks", Model.Tasks);}
                </div>
            </div>
        </div>

        <div class="col-md-4 job-details-details-box">
            <div class="panel panel-default">
                <div class="panel-heading">
                    Details
                </div>
                <div class="panel-body">
                    <dl class="dl-horizontal">
                        <dt>
                            @Html.DisplayNameFor(model => model.CreationDate)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.CreationDate)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.Description)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.Description)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.EmailComponentId)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.EmailComponentId)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.IsActive)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.IsActive)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.IsExecuting)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.IsExecuting)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.LastExecution)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.LastExecution)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.Name)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.Name)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.NextExecutionDate)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.NextExecutionDate)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.UpdateDate)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.UpdateDate)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.SendMailOnSuccess)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.SendMailOnSuccess)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.SendMailOnWarning)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.SendMailOnWarning)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.SendMailOnError)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.SendMailOnError)
                        </dd>

                        <dt>
                            @Html.DisplayNameFor(model => model.IsDebug)
                        </dt>

                        <dd>
                            @Html.DisplayFor(model => model.IsDebug)
                        </dd>

                    </dl>
                </div>
            </div>
        </div>


    </div>

    <div class="row">

        <div class="col-md-8 job-details-logs-box">
            <div class="panel panel-default">
                <div class="panel-heading">
                    Logs
                </div>
                <div class="panel-body">

                </div>
            </div>
        </div>

        <div class="col-md-4 job-details-triggers-box">
            <div class="panel panel-default">
                <div class="panel-heading">
                    Triggers
                </div>
                <div class="panel-body">

                </div>
            </div>
        </div>

    </div>


</div>
<script type="text/javascript">

    $(document).ready(function () {
        $("#btn-refresh-tasks").click(function () {
            $("#tasks-table").load('@Url.Action("JobsTasks", "Jobs", new {jobId = Model.Id })')
        });
    });
</script>  